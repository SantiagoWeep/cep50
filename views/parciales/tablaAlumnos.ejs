<% if (Object.keys(alumnosPorCurso).length === 0) { %>
  <div class="alert alert-warning mt-4" role="alert">
    No hay alumnos que coincidan con la búsqueda.
  </div>
<% } else { %>
  <% Object.keys(alumnosPorCurso).forEach(curso => { %>
    <h2 class="mt-4"><%= curso %> Año</h2>
    <div class="table-responsive">
      <table class="table table-striped align-middle">
        <thead class="table-dark">
          <tr>
            <th>DNI</th>
            <th>Apellido</th>
            <th>Nombres</th>
            <th>Edad</th>
            <th>Teléfono</th>
            <th>Regular</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <% alumnosPorCurso[curso].forEach(alumno => { %>
            <tr>
              <td><%= alumno.dni %></td>
              <td><%= alumno.apellido %></td>
              <td><%= alumno.nombre %></td>
              <td><%= alumno.edad %></td>
              <td><%= alumno.telefono %></td>
              <td>
                <div class="form-check form-switch">
                  <input 
                    class="form-check-input switch-regular" 
                    type="checkbox" 
                    role="switch" 
                    data-id="<%= alumno.id %>" 
                    <%= alumno.regular ? 'checked' : '' %>
                  >
                  <span class="ms-2 fw-bold" style="color: <%= alumno.regular ? 'green' : 'red' %>">
                    <%= alumno.regular ? 'Sí' : 'No' %>
                  </span>
                </div>
              </td>
              <td>
                <button class="btn btn-sm btn-primary me-2" data-bs-toggle="modal" data-bs-target="#modalEditarAlumno<%= alumno.id %>">
                  <i class="bi bi-pencil-fill"></i>
                </button>
                <button class="btn btn-sm btn-danger" data-bs-toggle="modal" data-bs-target="#modalEliminarAlumno<%= alumno.id %>">
                  <i class="bi bi-trash-fill"></i>
                </button>
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  <% }) %>
<% } %>
