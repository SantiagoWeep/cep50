use boletines;
drop DATABASE boletines;

CREATE TABLE alumnos (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(255) NOT NULL,
    apellido VARCHAR(255) NOT NULL,
    dni VARCHAR(20) NOT NULL,
    edad INT NOT NULL,
    telefono VARCHAR(20),
    tutor VARCHAR(255),
    regular BOOLEAN NOT NULL,
    curso_id BIGINT
);

CREATE TABLE profesores (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(255) NOT NULL,
    apellido VARCHAR(255) NOT NULL,
    dni VARCHAR(20) NOT NULL,
    materia_que_dicta VARCHAR(255) NOT NULL,
    curso_id BIGINT,
    activo BOOLEAN NOT NULL
);

CREATE TABLE cursos (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(255) NOT NULL,
    profesor_id BIGINT,
    alumno_id BIGINT,
    FOREIGN KEY (profesor_id) REFERENCES profesores(id),
    FOREIGN KEY (alumno_id) REFERENCES alumnos(id)
);

CREATE TABLE notas (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    alumno_id BIGINT,
    curso_id BIGINT,
    materia VARCHAR(255) NOT NULL,
    nota DECIMAL(5, 2) NOT NULL,
    trimestre INT NOT NULL,
    FOREIGN KEY (alumno_id) REFERENCES alumnos(id),
    FOREIGN KEY (curso_id) REFERENCES cursos(id)
);

CREATE TABLE examenes (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    nota_id BIGINT,
    examen_numero INT NOT NULL,
    nota DECIMAL(5, 2) NOT NULL,
    FOREIGN KEY (nota_id) REFERENCES notas(id)
);

CREATE TABLE boletines (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    alumno_id BIGINT,
    curso_id BIGINT,
    notas JSON,
    FOREIGN KEY (alumno_id) REFERENCES alumnos(id),
    FOREIGN KEY (curso_id) REFERENCES cursos(id)
);


INSERT INTO cursos (nombre) VALUES 
('Primero'),
('Segundo'),
('Tercero'),
('Cuarto'),
('Quinto');


-- Profesores fijos
INSERT INTO profesores (nombre, apellido, dni, materia_que_dicta, curso_id, activo) VALUES
('Santiago', 'Maidana', '30123456', 'Matemáticas', 1, TRUE),
('Santiago', 'Maidana', '30123456', 'Matemáticas', 2, TRUE),
('Santiago', 'Maidana', '30123456', 'Matemáticas', 3, TRUE),
('Santiago', 'Maidana', '30123456', 'Matemáticas', 4, TRUE),
('Fernando', 'Vargas', '31234567', 'Economía', 4, TRUE),
('Fernando', 'Vargas', '31234567', 'Economía', 5, TRUE);

-- 8 profesores aleatorios
INSERT INTO profesores (nombre, apellido, dni, materia_que_dicta, curso_id, activo) VALUES
('Laura', 'Fernández', '32100001', 'Historia', 1, TRUE),
('Carlos', 'Pérez', '32100002', 'Biología', 2, TRUE),
('Ana', 'López', '32100003', 'Geografía', 3, TRUE),
('Julieta', 'Martínez', '32100004', 'Lengua', 4, TRUE),
('Mariano', 'Gómez', '32100005', 'Filosofía', 5, TRUE),
('Nicolás', 'Rojas', '32100006', 'Matemáticas', 5, TRUE),
('María', 'Silva', '32100007', 'Historia', 2, TRUE),
('Esteban', 'Ramírez', '32100008', 'Lengua', 3, TRUE);

-- Alumnos para cada curso (5 por curso)
INSERT INTO alumnos (nombre, apellido, dni, edad, telefono, tutor, regular, curso_id) VALUES
-- Primero
('Juan', 'García', '40111111', 12, '111111111', 'Carlos García', TRUE, 1),
('Lucía', 'Pérez', '40111112', 12, '111111112', 'Ana Pérez', TRUE, 1),
('Marcos', 'López', '40111113', 13, '111111113', 'Sandra López', TRUE, 1),
('Carla', 'Martínez', '40111114', 12, '111111114', 'Mario Martínez', TRUE, 1),
('Sofía', 'Ruiz', '40111115', 13, '111111115', 'Luis Ruiz', TRUE, 1),

-- Segundo
('Diego', 'Fernández', '40222221', 13, '222222221', 'Laura Fernández', TRUE, 2),
('Natalia', 'Gómez', '40222222', 13, '222222222', 'Oscar Gómez', TRUE, 2),
('Pedro', 'Sosa', '40222223', 14, '222222223', 'Gloria Sosa', TRUE, 2),
('Elena', 'Díaz', '40222224', 14, '222222224', 'Rodolfo Díaz', TRUE, 2),
('Facundo', 'Herrera', '40222225', 13, '222222225', 'Nora Herrera', TRUE, 2),

-- Tercero
('Martina', 'Álvarez', '40333331', 14, '333333331', 'Jorge Álvarez', TRUE, 3),
('Tomás', 'Vega', '40333332', 15, '333333332', 'Marina Vega', TRUE, 3),
('Bruno', 'Ibarra', '40333333', 15, '333333333', 'Lucía Ibarra', TRUE, 3),
('Agustina', 'Correa', '40333334', 14, '333333334', 'Damián Correa', TRUE, 3),
('Camila', 'Ojeda', '40333335', 15, '333333335', 'Teresa Ojeda', TRUE, 3),

-- Cuarto
('Lautaro', 'Medina', '40444441', 15, '444444441', 'Alina Medina', TRUE, 4),
('Florencia', 'Morales', '40444442', 16, '444444442', 'Iván Morales', TRUE, 4),
('Valentina', 'Silva', '40444443', 16, '444444443', 'Fabián Silva', TRUE, 4),
('Julián', 'Ramos', '40444444', 15, '444444444', 'Beatriz Ramos', TRUE, 4),
('Julieta', 'Luna', '40444445', 16, '444444445', 'Néstor Luna', TRUE, 4),

-- Quinto
('Gabriel', 'Benítez', '40555551', 16, '555555551', 'Flor Benítez', TRUE, 5),
('Milagros', 'Mendoza', '40555552', 17, '555555552', 'Ángel Mendoza', TRUE, 5),
('Ignacio', 'Castro', '40555553', 17, '555555553', 'Carmen Castro', TRUE, 5),
('Daniela', 'Acosta', '40555554', 16, '555555554', 'Roberto Acosta', TRUE, 5),
('Emilia', 'Suárez', '40555555', 17, '555555555', 'Sergio Suárez', TRUE, 5);

SELECT * FROM alumnos;


SELECT * FROM cursos WHERE profesor_id IS NOT NULL;

